webpackJsonp([2],{9:function(e,t,r){t=e.exports=r(4)(),t.push([e.id,".pagination-box{padding:20px 15px 40px}.pagination{text-align:center}.pagination li{font-size:1.6rem;line-height:1;display:inline-block;margin:0 .2em;padding:.6em .8em;cursor:pointer;-webkit-user-select:none;user-select:none;border:1px solid;border-color:#dee5e7;border-color:#d8e1e3;border-radius:.25em;background:#fff;box-shadow:0 1px 1px rgba(90,90,90,.1)}.pagination li.current,.pagination li:hover{color:#58666e;background-color:#edf1f2;border-color:#c7d3d6}.pagination li.current{pointer-events:none;box-shadow:inset 0 3px 5px rgba(0,0,0,.125)}.pagination li:active{transform:scale(.9)}.pagination li.disabled{cursor:not-allowed;opacity:.8}.pagination li.disabled:active{transform:scale(1)}.pagination li.separate{pointer-events:none}",""])},10:function(e,t,r){var a=r(9);"string"==typeof a&&(a=[[e.id,a,""]]);r(5)(a,{});a.locals&&(e.exports=a.locals)},11:function(e,t){e.exports='<div class=pagination-box> <ul class=pagination ng-show="pagination.config.totalItems > 0"> <li ng-class="{disabled: pagination.config.currentPage == 1}" ng-click=pagination.prevPage()> <span>&laquo;</span> </li> <li ng-repeat="item in pagination.pageList track by $index" ng-class="{\'current\': item == pagination.config.currentPage, \'separate\': item == \'...\'}" ng-click=pagination.changeCurrentPage(item)> <span>{{ item }}</span> </li> <li ng-class="{disabled: pagination.config.currentPage == pagination.config.numberOfPages}" ng-click=pagination.nextPage()> <span>&raquo;</span> </li> </ul> </div>'},12:function(e,t,r){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var a=r(11),n=_interopRequireDefault(a);r(10);var i=r(13),o=_interopRequireDefault(i),s={bindings:{config:"="},template:n["default"],controller:o["default"],controllerAs:"pagination"};t["default"]=angular.module("app.components.pagination",[]).component("pagination",s)},13:function(e,t,r){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var a=r(3),n=_interopRequireDefault(a),i=r(1),o=_interopRequireDefault(i),s=r(2),p=_interopRequireDefault(s),l=function(){function PaginationController(e,t,r){"ngInject";function getPagination(e,t){if(i.config.currentPage=parseInt(i.config.currentPage,10)||1,i.config.totalItems=parseInt(i.config.totalItems,10)||0,i.config.itemsPerPage=parseInt(i.config.itemsPerPage,10)||15,i.config.numberOfPages=Math.ceil(i.config.totalItems/i.config.itemsPerPage),i.config.numberOfPages>0&&i.config.currentPage>i.config.numberOfPages&&(i.config.currentPage=i.config.numberOfPages),i.pageList=[],i.config.numberOfPages<=i.config.pagesLength)for(var r=1;r<=i.config.numberOfPages;r++)i.pageList.push(r);else{var a=(i.config.pagesLength-1)/2;if(i.config.currentPage<=a){for(var n=1;n<=a+1;n++)i.pageList.push(n);i.pageList.push("..."),i.pageList.push(i.config.numberOfPages)}else if(i.config.currentPage>i.config.numberOfPages-a){i.pageList.push(1),i.pageList.push("...");for(var o=a+1;o>=1;o--)i.pageList.push(i.config.numberOfPages-o);i.pageList.push(i.config.numberOfPages)}else{i.pageList.push(1),i.pageList.push("...");for(var s=Math.ceil(a/2);s>=1;s--)i.pageList.push(i.config.currentPage-s);i.pageList.push(i.config.currentPage);for(var p=1;p<=a/2;p++)i.pageList.push(i.config.currentPage+p);i.pageList.push("..."),i.pageList.push(i.config.numberOfPages)}}!i.config.pageOnChange||t!==e&&0===t[0]||i.config.pageOnChange()}var a=this;(0,o["default"])(this,PaginationController),(0,n["default"])(this,{$scope:e,$element:t,$attrs:r}),this.config.pagesLength=Number(this.config.pagesLength)||9,this.config.pagesLength%2===0&&(this.config.pagesLength=this.config.pagesLength-1),this.$scope.$watch(function(){a.config.totalItems=a.config.totalItems||0;var e=a.config.totalItems+" "+a.config.currentPage+" "+a.config.itemsPerPage;return e},getPagination);var i=this}return PaginationController.$inject=["$scope","$element","$attrs"],(0,p["default"])(PaginationController,[{key:"changeCurrentPage",value:function changeCurrentPage(e){"..."!==e&&(this.config.currentPage=e)}},{key:"prevPage",value:function prevPage(){this.config.currentPage>1&&this.config.currentPage--}},{key:"nextPage",value:function nextPage(){this.config.currentPage<this.config.numberOfPages&&this.config.currentPage++}}]),PaginationController}();t["default"]=l},54:function(e,t,r){t=e.exports=r(4)(),t.push([e.id,".person-wrapper{display:flex;flex-wrap:wrap;margin-left:-1.5rem;margin-right:-1.5rem;user-select:none;-webkit-user-select:none;-moz-user-select:none}.person-wrapper .person{display:block;width:20%;padding:1.5rem}@media screen and (max-width:1440px){.person-wrapper .person{width:25%}}@media screen and (max-width:1150px){.person-wrapper .person{width:33.33333%}}@media screen and (max-width:920px){.person-wrapper .person{width:50%}}@media screen and (max-width:520px){.person-wrapper .person{width:100%}}.person-wrapper .inner-wrapper{background:#fff;box-shadow:0 1px 1px rgba(0,0,0,.1);transition:all .35s linear;position:relative;border-radius:2px;overflow:hidden}.person-wrapper .inner-wrapper:hover{border-color:transparent}.person-wrapper .inner-wrapper:hover .overview-more{opacity:1}.person-wrapper .thumbnail-wrapper{display:inline-block;width:100%;text-align:center;padding:2.5rem 0 2rem}.person-wrapper .thumbnail-wrapper .name{font-weight:300;font-size:2rem}.person-wrapper .overview{border-top:1px solid rgba(0,0,0,.08);padding:1.5rem 0}.person-wrapper .overview .item{width:33.33333%;float:left;text-align:center}.person-wrapper .overview .item span{font-size:1.6rem;font-weight:300}.person-wrapper .overview .item .name{display:block;font-weight:300;text-transform:capitalize;font-size:1rem}.person-wrapper .overview .item:nth-child(1) span:not(.name){color:#7266ba}.person-wrapper .overview .item:nth-child(2) span:not(.name){color:#23b7e5}.person-wrapper .overview .item:nth-child(3) span:not(.name){color:#fad733}.person-wrapper .thumbnail{display:inline-block;width:160px;height:160px;border-radius:50%;overflow:hidden}.person-wrapper .thumbnail img{border-radius:50%}.person-wrapper .overview-more{text-align:center;position:absolute;left:0;right:0;top:0;bottom:0;z-index:2;color:#fff;background-color:rgba(78,87,103,.88);transition:all .35s ease-in-out;opacity:0;border-radius:2px}.person-wrapper .overview-more span{font-weight:300}.person-wrapper .overview-more .name{font-weight:300;display:block;margin-bottom:1rem}.person-wrapper .overview-more .btn-link{color:#fff;border-radius:20px;padding-left:1.5rem;padding-right:1.5rem}.person-wrapper .overview-more .btn-link:hover{color:#eec141}",""])},55:function(e,t,r){var a=r(54);"string"==typeof a&&(a=[[e.id,a,""]]);r(5)(a,{});a.locals&&(e.exports=a.locals)},56:function(e,t){e.exports='<div class=inner-wrapper> <div class=thumbnail-wrapper> <figure class="thumbnail lazyimg"> <img imgload={{$root.image_uri}}/w235_and_h235_bestv2{{vm.person.profile_path}}> </figure> <h5 class=name>{{vm.person.name}}</h5> </div> <div class="overview clearfix"> <div class=item> <span class=name>popularity</span> <span class=number>{{vm.person.popularity | voteFilter}}</span> </div> <div class=item> <span class=name>release date</span> <span class=number>{{vm.person.known_for[0].release_date}}</span> </div> <div class=item> <span class=name>vote</span> <span class=number>{{vm.person.known_for[0].vote_count}}</span> </div> </div> <div class="overview-more flex-middle-center"> <div class=center-box> <span>Do you want to know more</span> <h4 class=name>{{vm.person.name}} ?</h4> <a ui-sref="root.layout.person.profile({name:vm.person.name, id: vm.person.id})" class="btn btn-link">Learn more</a> </div> </div> </div>'},58:function(e,t,r){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0}),r(55);var a=r(56),n=_interopRequireDefault(a),i={bindings:{person:"<"},template:n["default"],controllerAs:"vm"};t["default"]=angular.module("app.components.personCard",[]).component("personCard",i)},138:function(e,t,r){t=e.exports=r(4)(),t.push([e.id,".tab-container{margin-top:1.5rem}.tab-container .badge{margin-left:.3rem}.tab-container .nav-tabs a{min-width:80px;text-align:center}.search-list .person-wrapper .inner-wrapper{background:hsla(0,0%,96%,.38);box-shadow:0 1px 1px rgba(0,0,0,.13)}.search-list .empty-list{height:60vh;line-height:60vh;text-align:center}.search-list .movies{background-color:#fff}.search-list .movies li{padding:1.5rem 0;display:flex;margin-bottom:1rem}.search-list .movies li:nth-child(even){background-color:rgba(0,0,0,.02)}.search-list .movies .thumbnail{width:100px;height:144px}.search-list .movies .overview{flex:1;padding-left:1.5rem}.search-list .movies .overview a:hover{color:#7266ba;text-decoration:underline}.search-list .movies .overview .text{font-size:1.3rem;max-height:120px;overflow:auto}",""])},152:function(e,t,r){var a=r(138);"string"==typeof a&&(a=[[e.id,a,""]]);r(5)(a,{});a.locals&&(e.exports=a.locals)},170:function(e,t,r){e.exports='<div class=page-title> <h4><i class="icons icon-magnifier"></i> Search</h4> <p><small class=text-muted>Search for (movies | persons) by title.</small></p> </div> <div class=root-wrapper> <div class=search-wrapper> <form name=searchForm ng-submit=vm.searchStart() novalidate> <div class=input-group> <input type=text ng-model=vm.keyword class=form-control placeholder="Type keyword" required> <span class=input-group-btn> <button type=submit class="btn btn-default" ng-disabled=searchForm.$invalid>Search</button> </span> </div> </form> <div class=tab-container> <ul class="nav nav-tabs clearfix"> <li ng-repeat="(key, type) in vm.searchTypes" ng-class="{active: type.key === vm.currentType}"> <a ng-click=vm.changeSearchType(type); class=text-cap>{{type.key}} <span class="badge bg-{{type.color}}" ng-if=type.totalResults ng-bind=type.totalResults>10</span> </a> </li> </ul> <div class="tab-content search-list"> <div class="empty-list text-muted" ng-if="vm.$resolved && !vm.totalResults" ng-switch=vm.currentType> <span ng-switch-when=movie>没有搜索到相关的电影！</span> <span ng-switch-when=person>没有搜索到相关的人物！</span> </div> <ul class=movies ng-if="vm.currentType === \'movie\'"> <li ng-repeat="movie in vm.movies track by $index"> <div class="thumbnail lazyimg"> <img imgload={{$root.image_uri}}/w342{{movie.poster_path}}> </div> <div class=overview> <h5><a class=text-info ui-sref="root.layout.movies.movieProfile({id: movie.id, name: movie.original_title})"> {{movie.title}} ({{movie.original_title}})</a> </h5> <p><small>{{movie.release_date}}</small></p> <p class=text>{{movie.overview || \'暂时没有影片介绍\'}}</p> </div> </li> </ul> <div class=person-wrapper ng-if="vm.currentType === \'person\'"> <person-card class=person ng-repeat="person in vm.persons track by $index" person=person></person-card> </div> <div class=loading-bar ng-if=!vm.$resolved> <img class=normal src='+r(238)+' alt=正在加载 width=32 height=32> <span>Loading...</span> </div> <pagination config=vm.paginationConfig ng-if="vm.totalResults > 20 && (vm.movies.length || vm.persons.length)"></pagination> </div> </div> </div> </div>'},199:function(e,t,r){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var a=r(7),n=_interopRequireDefault(a),i=r(16),o=_interopRequireDefault(i),s=r(14),p=_interopRequireDefault(s),l=r(15),c=_interopRequireDefault(l),u=r(3),g=_interopRequireDefault(u),f=r(1),d=_interopRequireDefault(f),h=r(2),m=_interopRequireDefault(h),v=r(8),b=_interopRequireDefault(v),w=(0,b["default"])(),y=function(){function SearchServiceBase(e,t,r,a){"ngInject";(0,d["default"])(this,SearchServiceBase),(0,g["default"])(this,{$resource:e,$q:t,API:r,ErrorHandler:a}),this[w]=this.ErrorHandler.catcher.bind(this.ErrorHandler),this.deferred=this.$q.defer()}return SearchServiceBase.$inject=["$resource","$q","API","ErrorHandler"],(0,m["default"])(SearchServiceBase,[{key:"search",value:function search(e){var t=this,r=this.$resource(this.API+"/search/:type",{},{get:{cache:!0}});return this.$q(function(a,n){var i=r.get(e).$promise;i.then(function(e){return a(e)},function(e){return n(e),t[w](e.code)})})}}]),SearchServiceBase}(),x=function(e){function SearchService(){return(0,d["default"])(this,SearchService),(0,o["default"])(this,(0,n["default"])(SearchService).apply(this,arguments))}return(0,c["default"])(SearchService,e),(0,m["default"])(SearchService,[{key:"$get",value:function $get(e){return(0,p["default"])((0,n["default"])(SearchService.prototype),"search",this).call(this,e)}}]),SearchService}(y);t["default"]=x},228:function(e,t,r){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0}),r(152);var a=r(199),n=_interopRequireDefault(a),i=r(12),o=_interopRequireDefault(i),s=r(58),p=_interopRequireDefault(s),l=r(229),c=_interopRequireDefault(l),u=angular.module("app.pages.search",[o["default"].name,p["default"].name]).service("SearchApi",n["default"]).controller(c["default"].name,c["default"]);t["default"]=u.name},229:function(e,t,r){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var a=r(3),n=_interopRequireDefault(a),i=r(1),o=_interopRequireDefault(i),s=r(2),p=_interopRequireDefault(s),l=function(){function SearchController(e,t,r,a,i){"ngInject";var s=this;(0,o["default"])(this,SearchController),(0,n["default"])(this,{$stateParams:e,$location:t,$state:r,SearchApi:a,RouterHelper:i}),this.paginationConfig={currentPage:this.$stateParams.page||1,itemsPerPage:20,pagesLength:9,pageOnChange:function pageOnChange(){s.$state.go(r.current,{page:s.paginationConfig.currentPage,type:s.currentType})}},this.currentType=e.type||"movie",e.type||(this.currentType="movie"),this.searchTypes={movie:{key:"movie",color:"warning",totalResults:this.moviesLastTotal},person:{key:"person",color:"primary",totalResults:this.personsLastTotal}},this.keyword=e.keyword||null,this.keyword&&this.activate()}return SearchController.$inject=["$stateParams","$location","$state","SearchApi","RouterHelper"],(0,p["default"])(SearchController,[{key:"activate",value:function activate(){var e=this;this.$location.search("keyword",this.keyword);var t=this.SearchApi.$get({type:this.currentType||"movie",query:this.keyword,page:this.paginationConfig.currentPage});t.then(function(t){"movie"===e.currentType?(e.movies=t.results,e.searchTypes.movie.totalResults=t.total_results,e.searchTypes.person.totalResults=e.personsLastTotal):(e.persons=t.results,e.searchTypes.movie.totalResults=e.moviesLastTotal,e.searchTypes.person.totalResults=t.total_results),e.totalResults=t.total_results,e.$resolved=t.$resolved,e.paginationConfig.totalItems=t.total_results,e.paginationConfig.currentPage=t.page,e.RouterHelper.updateDocTitle(e.keyword+"的搜索结果，共计"+e.totalResults+"条数据")},function(){e.$resolved=!0})}},{key:"searchStart",value:function searchStart(){this.activate()}},{key:"changeSearchType",value:function changeSearchType(e){this.paginationConfig.currentPage=1,this.currentType=e.key,this.$location.search("page",1),this.$location.search("type",this.currentType),this.activate()}}]),SearchController}();t["default"]=l},238:function(e,t,r){e.exports=r.p+"/assets/fonts/loading.svg?ff8c524ded980b81bc5ba1cfb3d7d60c"}});